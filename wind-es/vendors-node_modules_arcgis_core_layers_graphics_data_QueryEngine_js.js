"use strict";
(self["webpackChunkwind_es"] = self["webpackChunkwind_es"] || []).push([["vendors-node_modules_arcgis_core_layers_graphics_data_QueryEngine_js"],{

/***/ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/sql/WhereClauseCache.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WhereClauseCache": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _ItemCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ItemCache.js */ "./node_modules/@arcgis/core/core/ItemCache.js");
/* harmony import */ var _WhereClause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
class c{constructor(e,c){this._cache=new _ItemCache_js__WEBPACK_IMPORTED_MODULE_0__.default(e),this._invalidCache=new _ItemCache_js__WEBPACK_IMPORTED_MODULE_0__.default(c)}get(t,c){const i=`${c.uid}:${t}`,r=this._cache.get(i);if(r)return r;if(void 0!==this._invalidCache.get(i))return null;try{const r=_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create(t,c);return this._cache.put(i,r),r}catch{return this._invalidCache.put(i,null),null}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../smartMapping/statistics/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/statistics/support/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
class r{constructor(t,a,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=t.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=a;const l=t.outFields;if(l&&-1===l.indexOf("*")){this.outFields=l;let t=0;for(const a of l){const l=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getExpressionFromFieldName)(a),u=this.fieldsIndex.get(l),n=u?null:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getWhereClause)(l,r),c=u?u.name:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getAliasFromFieldName)(a)||"FIELD_EXP_"+t++;this._fieldDataCache.set(a,{alias:c,clause:n})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,e,i){const a=i?i.name:e;let r=null;return this._fieldDataCache.has(a)?r=this._fieldDataCache.get(a).clause:i||(r=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getWhereClause)(e,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:r})),i?this.featureAdapter.getAttribute(t,a):r.calculateValue(t,this.featureAdapter)}getNormalizedValue(t,e){const s=e.normalizationType,i=e.normalizationTotal;let r=this.getFieldValue(t,e.field,e.fieldInfo);if(s&&Number.isFinite(r)){const l=this.getFieldValue(t,e.normalizationField,e.normalizationFieldInfo);r=(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_2__.getNormalizedValue)(r,s,l,i)}return r}getExpressionValue(t,e,s){const i={attributes:this.featureAdapter.getAttributes(t)},a=s.createExecContext(i,e.viewInfo);return s.executeFunction(e.compiledFunc,a)}validateItem(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getWhereClause)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testFeature(t,this.featureAdapter)}validateItems(t,e){return this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.getWhereClause)(e,this.fieldsIndex)}),this._fieldDataCache.get(e).clause.testSet(t,this.featureAdapter)}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const s={};for(const i of e){const{alias:e,clause:a}=this._fieldDataCache.get(i);s[e]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return s}_processAttributesForDistinctValues(e){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(e)||!this.returnDistinctValues)return e;const s=this.outFields,i=[];if(s)for(const t of s){const{alias:s}=this._fieldDataCache.get(t);i.push(e[s])}else for(const t in e)i.push(e[t]);const a=`${(s||["*"]).join(",")}=${i.join(",")}`;let r=this._returnDistinctMap.get(a)||0;return this._returnDistinctMap.set(a,++r),r>1?null:e}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (r);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   "Feature": () => (/* binding */ M)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./QueryEngineCapabilities.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js");
/* harmony import */ var _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./QueryEngineResult.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js");
/* harmony import */ var _spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./spatialQuerySupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js");
/* harmony import */ var _timeSupport_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./timeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../support/PromiseQueue.js */ "./node_modules/@arcgis/core/layers/support/PromiseQueue.js");
/* harmony import */ var _smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../smartMapping/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/support/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
function v(e){return e.every((e=>"exceedslimit"!==e.statisticType))}const q="feature-store:unsupported-query";class M{constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const U=new Set,N=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_3__.MemCacheStorage(2e6);let Z=0;class H{constructor(e){this.capabilities={query:_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_13__.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_3__.MemCache(Z+++"$$",N)),this.fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_18__.default(e.fields),e.scheduler&&e.priority&&(this._frameQueue=new _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_19__.default,this._frameTask=e.scheduler.registerTask(e.priority,this))}destroy(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.cleanFromGeometryEngine)(this.spatialReference)}:null}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_16__.getTimeExtent)(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null}async executeQuery(e={},i){let s,r=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e);try{r=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(r,this.definitionExpression,this.spatialReference)),i),r=await this._reschedule((()=>this._checkQuerySupport(r)),i),s=await this._reschedule((()=>this._executeGeometryQuery(r,i)),i),s=await this._reschedule((()=>s.executeAggregateIdsQuery(r)),i),s=await this._reschedule((()=>s.executeObjectIdsQuery(r)),i),s=await this._reschedule((()=>s.executeTimeQuery(r)),i),s=await this._reschedule((()=>s.executeAttributesQuery(r)),i)}catch(a){if(a!==_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)throw a;s=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default([],null,this)}return s.createQueryResponse(r)}async executeQueryForCount(e={},i){let s,r=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e);r.returnGeometry=!1,r.returnCentroid=!1,r.outSR=null;try{r=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(r,this.definitionExpression,this.spatialReference)),i),r=await this._reschedule((()=>this._checkQuerySupport(r)),i),s=await this._reschedule((()=>this._executeGeometryQuery(r,i)),i),s=await this._reschedule((()=>s.executeAggregateIdsQuery(r)),i),s=await this._reschedule((()=>s.executeObjectIdsQuery(r)),i),s=await this._reschedule((()=>s.executeTimeQuery(r)),i),s=await this._reschedule((()=>s.executeAttributesQuery(r)),i)}catch(a){if(a!==_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)throw a;return 0}return s.createQueryResponseForCount(r)}async executeQueryForExtent(e={},i){let s,r=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e);const a=r.outSR;try{r=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(r,this.definitionExpression,this.spatialReference)),i),r=await this._reschedule((()=>this._checkQuerySupport(r)),i),r.returnGeometry=!0,r.returnCentroid=!1,r.outSR=null,s=await this._reschedule((()=>this._executeGeometryQuery(r,i)),i),s=await this._reschedule((()=>s.executeAggregateIdsQuery(r)),i),s=await this._reschedule((()=>s.executeObjectIdsQuery(r)),i),s=await this._reschedule((()=>s.executeTimeQuery(r)),i),s=await this._reschedule((()=>s.executeAttributesQuery(r)),i);const e=s.size;if(!e)return{count:e,extent:null};(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__.set)(L,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__.NEGATIVE_INFINITY),this.featureStore.forEachBounds(s.items,(e=>(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__.expandWithAABB)(L,e)),J);const t={xmin:L[0],ymin:L[1],xmax:L[3],ymax:L[4],spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.cleanFromGeometryEngine)(this.spatialReference)};this.hasZ&&isFinite(L[2])&&isFinite(L[5])&&(t.zmin=L[2],t.zmax=L[5]);const u=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.project)(t,s.spatialReference,a);if(u.spatialReference=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.cleanFromGeometryEngine)(a||this.spatialReference),u.xmax-u.xmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerUnitForSR)(u.spatialReference);u.xmin-=e,u.xmax+=e}if(u.ymax-u.ymin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerUnitForSR)(u.spatialReference);u.ymin-=e,u.ymax+=e}if(this.hasZ&&null!=u.zmin&&null!=u.zmax&&u.zmax-u.zmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerUnitForSR)(u.spatialReference);u.zmin-=e,u.zmax+=e}return{count:e,extent:u}}catch(u){if(u===_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw u}}async executeQueryForIds(e={},t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e={},i){let s,r=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e);r.returnGeometry=!1,r.returnCentroid=!1,r.outSR=null;try{r=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(r,this.definitionExpression,this.spatialReference)),i),r=await this._reschedule((()=>this._checkQuerySupport(r)),i),s=await this._reschedule((()=>this._executeGeometryQuery(r,i)),i),s=await this._reschedule((()=>s.executeAggregateIdsQuery(r)),i),s=await this._reschedule((()=>s.executeObjectIdsQuery(r)),i),s=await this._reschedule((()=>s.executeTimeQuery(r)),i),s=await this._reschedule((()=>s.executeAttributesQuery(r)),i);const e=s.items,t=new Set;return await this._reschedule((()=>{for(const i of e)t.add(s.featureAdapter.getObjectId(i))}),i),t}catch(a){if(a===_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw a}}async executeQueryForSnapping(e,t){const{point:s,distance:r,types:a}=e;if(0===a)return{candidates:[]};const n=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),u=!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__.equals)(s.spatialReference,this.spatialReference);u&&await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.checkProjectionSupport)(s.spatialReference,this.spatialReference);const o="number"==typeof r?r:r.x,c="number"==typeof r?r:r.y,h={xmin:s.x-o,xmax:s.x+o,ymin:s.y-c,ymax:s.y+c,spatialReference:s.spatialReference},l=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.project)(h,this.spatialReference):h;if(!l)return{candidates:[]};const p=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__.fromJSON)(s),null,{signal:t}))[0],m=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_9__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__.fromJSON)(l),null,{signal:t}))[0];if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isNone)(p)||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isNone)(m))return{candidates:[]};let y=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default(this._searchFeatures(this._getQueryBBoxes(m.toJSON())),null,this);y=await this._reschedule((()=>y.executeObjectIdsQuery(n)),t),y=await this._reschedule((()=>y.executeTimeQuery(n)),t),y=await this._reschedule((()=>y.executeAttributesQuery(n)),t);const f=p.toJSON(),g=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.project)(f,this.spatialReference):f,w=u?Math.max(l.xmax-l.xmin,l.ymax-l.ymin)/2:r;return y.createSnappingResponse({...e,point:g,distance:w},s.spatialReference)}async executeQueryForLatestObservations(i={},s){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"Missing timeInfo or timeInfo.trackIdField",{query:i,timeInfo:this.timeInfo});let r,a=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(i);try{a=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(a,this.definitionExpression,this.spatialReference)),s),a=await this._reschedule((()=>this._checkQuerySupport(a)),s),r=await this._reschedule((()=>this._executeGeometryQuery(a,s)),s),r=await this._reschedule((()=>r.executeAggregateIdsQuery(a)),s),r=await this._reschedule((()=>r.executeObjectIdsQuery(a)),s),r=await this._reschedule((()=>r.executeTimeQuery(a)),s),r=await this._reschedule((()=>r.executeAttributesQuery(a)),s),r=await this._reschedule((()=>r.filterLatest()),s)}catch(n){if(n!==_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)throw n;r=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default([],null,this)}return r.createQueryResponse(a)}async executeQueryForSummaryStatistics(e={},i,s){let r;e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e);try{e=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),s),e=await this._reschedule((()=>this._checkSummaryStatisticsSupport(e,i)),s),r=await this._reschedule((()=>this._executeGeometryQuery(e,s)),s),r=await this._reschedule((()=>r.executeAggregateIdsQuery(e)),s),r=await this._reschedule((()=>r.executeObjectIdsQuery(e)),s),r=await this._reschedule((()=>r.executeTimeQuery(e)),s),r=await this._reschedule((()=>r.executeAttributesQuery(e)),s)}catch(a){if(a!==_utils_js__WEBPACK_IMPORTED_MODULE_17__.QUERY_ENGINE_EMPTY_RESULT)throw a;r=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default([],null,this)}return r.createSummaryStatisticsResponse(e,i)}async _schedule(e,t){return this._frameQueue?this._frameQueue.push(e,t):e()}async _reschedule(e,t){return this._frameQueue?this._frameQueue.unshift(e,t):e()}get running(){return this._frameQueue.length>0}runTask(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null}_getAll(){if(!this._allItems){const e=[];this.featureStore.forEach((t=>e.push(t))),this._allItems=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default(e,null,this)}return this._allItems}async _executeGeometryQuery(e,t){const{geometry:i,outSR:r,spatialRel:a,returnGeometry:n,returnCentroid:u}=e,o=n||u,c=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__.isValid)(r)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_10__.equals)(this.spatialReference,r),h=this._geometryQueryCache?c&&o?JSON.stringify({geometry:i,spatialRelationship:a,outSpatialReference:r}):JSON.stringify({geometry:i,spatialRelationship:a}):null;if(h){const e=this._geometryQueryCache.get(h);if(!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isUndefined)(e))return e}const l=async e=>{if(c&&o){const t=await e.project(r);return h&&this._geometryQueryCache.put(h,t,t.size||1),t}return h&&this._geometryQueryCache.put(h,e,e.size||1),e};if(!i)return l(this._getAll());const p=this.featureAdapter;if("esriSpatialRelDisjoint"===a){const e=this._searchFeatures(this._getQueryBBoxes(i));if(!e.length)return l(this._getAll());let s,r;const n=new Set;for(const t of e)n.add(p.getObjectId(t));await this._reschedule((()=>{let e=0;s=new Array(n.size),this.featureStore.forEach((t=>s[e++]=t)),r=n}),t);return l(await this._reschedule((async()=>{const e=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.getSpatialQueryOperator)(a,i,this.geometryType,this.hasZ,this.hasM),n=t=>!r.has(p.getObjectId(t))||e(p.getGeometry(t));return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default(await this._runSpatialFilter(s,n,t),i,this)}),t))}const m=this._searchFeatures(this._getQueryBBoxes(i));if(!m.length){const e=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default([],i,this);return h&&this._geometryQueryCache.put(h,e,e.size||1),e}if(this._canExecuteSoloPass(i,e))return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default(m,i,this));const d=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.getSpatialQueryOperator)(a,i,this.geometryType,this.hasZ,this.hasM),y=await this._runSpatialFilter(m,(e=>d(p.getGeometry(e))),t);return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_14__.default(y,i,this))}async _runSpatialFilter(e,t,i){if(!t)return e;if(!this._budget)return e.filter((e=>t(e)));let s=0;const r=new Array,a=async()=>{for(;s<e.length;){const n=e[s];t(n)&&r.push(n),this._budget.done&&await this._reschedule((()=>a()),i),++s}};return this._reschedule((()=>a()),i).then((()=>r))}_canExecuteSoloPass(e,t){const{geometryType:i}=this,{spatialRel:s}=t;return (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.canQueryWithRBush)(e)&&("esriSpatialRelEnvelopeIntersects"===s||"esriGeometryPoint"===i&&("esriSpatialRelIntersects"===s||"esriSpatialRelContains"===s||"esriSpatialRelWithin"===s))}_getQueryBBoxes(e){if((0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.canQueryWithRBush)(e)){if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__.isExtent)(e))return[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__.fromValues)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_8__.isPolygon)(e))return e.rings.map((e=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__.fromValues)(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_7__.getBoundsXY)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__.create)(),e)]}_searchFeatures(e){for(const s of e)this.featureStore.forEachInBounds(s,(e=>{U.add(e)}));const t=new Array(U.size);let i=0;return U.forEach((e=>t[i++]=e)),U.clear(),t}async _checkSummaryStatisticsSupport(t,i){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"Unsupported query options",{query:t});return Promise.all([this._checkAttributesQuerySupport(t),this._checkSummaryStatisticsParamsSupport(i),(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.checkSpatialQuerySupport)(t,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.checkProjectionSupport)(this.spatialReference,t.outSR)]).then((()=>t))}async _checkSummaryStatisticsParamsSupport(t){const i=await (0,_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_20__.getFieldsList)({field:t.field,normalizationField:t.normalizationField,valueExpression:t.valueExpression});if(!i.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"params should have atleast a field or valueExpression",{params:t});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateFields)(this.fieldsIndex,i,"params contains missing fields")}async _checkQuerySupport(t){if(t.distance<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"Unsupported query options",{query:t});return Promise.all([this._checkAttributesQuerySupport(t),this._checkStatisticsQuerySupport(t),(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_15__.checkSpatialQuerySupport)(t,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_12__.checkProjectionSupport)(this.spatialReference,t.outSR)]).then((()=>t))}_checkAttributesQuerySupport(t){const{outFields:i,orderByFields:s,returnDistinctValues:r,outStatistics:a}=t,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())):[];if(s&&s.length>0){const e=" asc",t=" desc",i=s.map((i=>{const s=i.toLowerCase();return s.indexOf(e)>-1?s.split(e)[0]:s.indexOf(t)>-1?s.split(t)[0]:i})).filter((e=>-1===n.indexOf(e)));(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateFields)(this.fieldsIndex,i,"orderByFields contains missing fields")}if(i&&i.length>0)(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateFields)(this.fieldsIndex,i,"outFields contains missing fields");else if(r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"outFields should be specified for returnDistinctValues",{query:t});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateWhere)(this.fieldsIndex,t.where)}async _checkStatisticsQuerySupport(t){const{outStatistics:i,groupByFieldsForStatistics:s,having:r}=t,a=s&&s.length,n=i&&i.length;if(r){if(!a||!n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateHaving)(this.fieldsIndex,r,i)}if(n){if(!v(i))return;const r=i.map((e=>e.onStatisticField));(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateFields)(this.fieldsIndex,r,"onStatisticFields contains missing fields"),a&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.validateFields)(this.fieldsIndex,s,"groupByFieldsForStatistics contains missing fields");for(const s of i){const{onStatisticField:i,statisticType:r}=s;if(("percentile_disc"===r||"percentile_cont"===r)&&"statisticParameters"in s){const{statisticParameters:i}=s;if(!i)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"statisticParamters should be set for percentile type",{definition:s,query:t})}else if("count"!==r&&i&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_11__.hasInvalidFieldType)(i,this.fieldsIndex))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(q,"outStatistics contains non-numeric fields",{definition:s,query:t})}}}}const J=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__.create)(),L=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__.create)();/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (H);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "queryCapabilities": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/quantizationUtils.js */ "./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AttributesBuilder.js */ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _timeSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./timeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../smartMapping/statistics/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/statistics/support/utils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
function x(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function F(e,t,s){return(s?e>t:e<t)?-1:(s?e<t:e>t)?1:0}function T(e,t,s){return s?t-e:e-t}function A(e,t,s,i){if(s&&"esriFieldTypeDate"===s.type){const s=new Date(e).getTime(),r=new Date(t).getTime();if(!isNaN(s)&&!isNaN(r))return T(s,r,i)}if("number"==typeof e&&"number"==typeof t)return T(e,t,i);if("string"==typeof e&&"string"==typeof t){const r=e.toUpperCase(),n=t.toUpperCase();return!s||"esriFieldTypeGUID"!==s.type&&"esriFieldTypeGlobalID"!==s.type?F(r,n,i):F(x(r),x(n),i)}return i?1:-1}class S{constructor(e,t,s){this.items=e,this.queryGeometry=t,this.definitionExpression=s.definitionExpression,this.geometryType=s.geometryType,this.hasM=s.hasM,this.hasZ=s.hasZ,this.objectIdField=s.objectIdField,this.spatialReference=s.spatialReference,this.fieldsIndex=s.fieldsIndex,this.timeInfo=s.timeInfo,this.featureAdapter=s.featureAdapter,this.aggregateAdapter=s.aggregateAdapter}get size(){return this.items.length}createQueryResponseForCount(e){const t=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__.default(e,this.featureAdapter,this.fieldsIndex);if(!e.outStatistics)return t.countDistinctValues(this.items);const{groupByFieldsForStatistics:s,having:i}=e;if(!!!(null==s?void 0:s.length))return 1;const r=new Map,n=new Map,o=new Set,u=e.outStatistics;for(const a of u){const{statisticType:e}=a,u="exceedslimit"!==e?a.onStatisticField:void 0;if(!n.has(u)){const e=[];for(const i of s){const s=this._getAttributeValues(t,i,r);e.push(s)}n.set(u,this._calculateUniqueValues(e))}const l=n.get(u);for(const s in l){const{data:e,items:r}=l[s],n=e.join(",");i&&!t.validateItems(r,i)||o.add(n)}}return o.size}createQueryResponse(e){let t;if(e.outStatistics){t=e.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e)}else t=this._createFeatureQueryResponse(e);return e.returnQueryGeometry&&((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.isValid)(e.outSR)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.equals)(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.cleanFromGeometryEngine)({spatialReference:e.outSR,...(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_6__.project)(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR)}):t.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.cleanFromGeometryEngine)({spatialReference:e.outSR,...this.queryGeometry})),t}createSnappingResponse(t,s){const i=this.featureAdapter,r=_(this.hasZ,this.hasM),{x:n,y:a}=t.point,o="number"==typeof t.distance?t.distance:t.distance.x,u="number"==typeof t.distance?t.distance:t.distance.y,l={candidates:[]},c="esriGeometryPolygon"===this.geometryType,d=this.getPointCreator(t.point,this.spatialReference,s);for(const h of this.items){const s=i.getGeometry(h);if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(s))continue;const{coords:m,lengths:f}=s;if(1&t.types){let e=0;for(let t=0;t<f.length;t++){const s=f[t];for(let t=0;t<s;t++,e+=r){const c=m[e],f=m[e+1];if(t!==s-1){const t=m[e+r],s=m[e+r+1],{x:p,y:g}=V(n,a,c,f,t,s),y=(n-p)/o,I=(a-g)/u,b=y*y+I*I;b<=1&&l.candidates.push({type:"edge",objectId:i.getObjectId(h),distance:Math.sqrt(b),target:d(p,g),start:d(c,f),end:d(t,s)})}}}}if(2&t.types){const e=c?m.length-r:m.length;for(let t=0;t<e;t+=r){const e=m[t],s=m[t+1],r=(n-e)/o,c=(a-s)/u,f=r*r+c*c;f<=1&&l.candidates.push({type:"vertex",objectId:i.getObjectId(h),distance:Math.sqrt(f),target:d(e,s)})}}}return l.candidates.sort(((e,t)=>e.distance-t.distance)),l}getPointCreator(e,s,i){const n=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.equals)(s,i)?e=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_6__.project)(e,s,i):e=>e;return null!=e.z&&null!=e.m?(t,s)=>n({x:t,y:s,z:e.z,m:e.m}):null!=e.z?(t,s)=>n({x:t,y:s,z:e.z}):null!=e.m?(t,s)=>n({x:t,y:s,m:e.m}):(e,t)=>n({x:e,y:t})}executeAttributesQuery(e){const t=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_5__.getWhereClause)(e.where,this.fieldsIndex);if(!t)return Promise.resolve(this);if(t.isStandardized){let s=0;const i=[];for(const e of this.items)t.testFeature(e,this.featureAdapter)&&(i[s++]=e);const r=new S(i,this.queryGeometry,this);return r.definitionExpression=e.where,Promise.resolve(r)}return Promise.reject(new TypeError("Where clause is not standardized"))}executeAggregateIdsQuery(t){if(!t.aggregateIds||!t.aggregateIds.length||(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(this.aggregateAdapter))return Promise.resolve(this);const s=new Set;for(const e of t.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(e).forEach((e=>s.add(e)))}const i=this.featureAdapter.getObjectId;return Promise.resolve(new S(this.items.filter((e=>s.has(i(e)))),this.queryGeometry,this))}executeObjectIdsQuery(e){if(!e.objectIds||!e.objectIds.length)return Promise.resolve(this);const t=new Set(e.objectIds),s=this.featureAdapter.getObjectId;return Promise.resolve(new S(this.items.filter((e=>t.has(s(e)))),this.queryGeometry,this))}executeTimeQuery(e){const s=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_7__.getTimeOperator)(this.timeInfo,e.timeExtent,this.featureAdapter);if(!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(s))return Promise.resolve(this);const i=this.items.filter(s);return Promise.resolve(new S(i,this.queryGeometry,this))}filterLatest(){const{trackIdField:e,startTimeField:t,endTimeField:s}=this.timeInfo,i=s||t,r=new Map,n=this.featureAdapter.getAttribute;for(const o of this.items){const t=n(o,e),s=n(o,i),a=r.get(t);(!a||s>n(a,i))&&r.set(t,o)}const a=Array.from(r.values());return Promise.resolve(new S(a,this.queryGeometry,this))}async project(e){if(!e||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.equals)(this.spatialReference,e))return this;const t=this.featureAdapter,s=(await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_6__.projectMany)(this.items.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.getGeometry)(this.geometryType,this.hasZ,this.hasM,t.getGeometry(e)))),this.spatialReference,e)).map(((e,s)=>t.cloneWithGeometry(this.items[s],(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_3__.convertFromGeometry)(e,this.hasZ,this.hasM))));return new S(s,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:e,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})}async createSummaryStatisticsResponse(e,t){const{field:s,normalizationField:i,normalizationType:r,normalizationTotal:n,minValue:o,maxValue:u}=t,l=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__.default(e,this.featureAdapter,this.fieldsIndex),c=this.fieldsIndex.isDateField(s),d=t.valueExpression?await this._getAttributeExpressionValues(l,t.valueExpression,t.viewInfoParams):this._getAttributeNormalizedValues(l,{field:s,normalizationField:i,normalizationType:r,normalizationTotal:n}),h=(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.isNullCountSupported)({normalizationType:r,normalizationField:i,minValue:o,maxValue:u}),m=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isStringField)(this.fieldsIndex.get(s))?(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStringStatistics)({values:d,supportsNullCount:h}):(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStatistics)({values:d,minValue:o,maxValue:u,useSampleStdDev:!r,supportsNullCount:h});return (0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.processStatsResult)(m,c)}_sortFeatures(e,t,s){if(e.length>1&&t&&t.length)for(const i of t.reverse()){const t=i.split(" "),r=t[0],n=this.fieldsIndex.get(r),a=t[1]&&"desc"===t[1].toLowerCase();e.sort(((e,t)=>A(s(e,r,n),s(t,r,n),n,a)))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:i,hasM:r,hasZ:n,objectIdField:a,spatialReference:o}=this,{outFields:u,outSR:l,quantizationParameters:c,resultRecordCount:h,resultOffset:m,returnZ:f,returnM:p}=e,g=null!=h&&t.length>(m||0)+h,y=u&&(u.indexOf("*")>-1?[...this.fieldsIndex.fields]:u.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:g,features:this._createFeatures(e,t),fields:y,geometryType:i,hasM:r&&p,hasZ:n&&f,objectIdFieldName:a,spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.cleanFromGeometryEngine)(l||o),transform:c&&(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_1__.toQuantizationTransform)(c)||null}}_createFeatures(e,t){const i=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__.default(e,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:n}=this,{orderByFields:o,quantizationParameters:u,returnGeometry:l,returnCentroid:c,maxAllowableOffset:d,resultOffset:f,resultRecordCount:p,returnZ:g=!1,returnM:y=!1}=e,I=n&&g,b=r&&y;let x=[],F=0;const T=[...t];if(this._sortFeatures(T,o,((e,t,s)=>i.getFieldValue(e,t,s))),l||c){const e=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_1__.toQuantizationTransform)(u);if(l&&!c)for(const t of T)x[F++]={attributes:i.getAttributes(t),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,I,b)};else if(!l&&c)for(const t of T)x[F++]={attributes:i.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of T)x[F++]={attributes:i.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,I,b)}}else for(const s of T){const e=i.getAttributes(s);e&&(x[F++]={attributes:e})}const A=f||0;if(null!=p){const e=A+p;x=x.slice(A,Math.min(x.length,e))}return x}_createExceedsLimitQueryResponse(e){let s=!1,i=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;for(const t of e.outStatistics)if("exceedslimit"===t.statisticType){i=null!=t.maxPointCount?t.maxPointCount:Number.POSITIVE_INFINITY,r=null!=t.maxRecordCount?t.maxRecordCount:Number.POSITIVE_INFINITY,n=null!=t.maxVertexCount?t.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)s=this.items.length>i;else if(this.items.length>r)s=!0;else{const e=this.hasZ?this.hasM?4:3:this.hasM?3:2,i=this.featureAdapter;s=this.items.reduce(((e,s)=>{const r=i.getGeometry(s);return e+((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r)&&r.coords.length||0)}),0)/e>n}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(s)}}]}}_createStatisticsQueryResponse(e){const t={attributes:{}},s=[],i=new Map,r=new Map,n=new Map,o=new Map,u=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__.default(e,this.featureAdapter,this.fieldsIndex),l=e.outStatistics,{groupByFieldsForStatistics:c,having:d,orderByFields:h}=e,m=c&&c.length,f=!!m,p=f&&c[0],g=f&&!this.fieldsIndex.get(p);for(const a of l){const{outStatisticFieldName:e,statisticType:l}=a,h=a,y="exceedslimit"!==l?a.onStatisticField:void 0,I="percentile_disc"===l||"percentile_cont"===l,b=f&&1===m&&(y===p||g)&&"count"===l;if(f){if(!n.has(y)){const e=[];for(const t of c){const s=this._getAttributeValues(u,t,i);e.push(s)}n.set(y,this._calculateUniqueValues(e,u.returnDistinctValues))}const t=n.get(y);for(const s in t){const{count:r,data:n,items:a,itemPositions:l}=t[s],m=n.join(",");if(!d||u.validateItems(a,d)){const t=o.get(m)||{attributes:{}};let s=null;if(b)s=r;else{const e=this._getAttributeValues(u,y,i),t=l.map((t=>e[t]));s=I&&"statisticParameters"in h?this._getPercentileValue(h,t):this._getStatisticValue(h,t)}t.attributes[e]=s,c.forEach(((e,s)=>t.attributes[this.fieldsIndex.get(e)?e:`EXPR_${s+1}`]=n[s])),o.set(m,t)}}}else{const s=this._getAttributeValues(u,y,i);t.attributes[e]=I&&"statisticParameters"in h?this._getPercentileValue(h,s):this._getStatisticValue(h,s,r)}s.push({name:e,alias:e,type:"esriFieldTypeDouble"})}const y=f?Array.from(o.values()):[t];return this._sortFeatures(y,h,((e,t)=>e.attributes[t])),{fields:s,features:y}}_getStatisticValue(e,t,s){const{onStatisticField:i,statisticType:r}=e;let n=null;n=null!=s&&s.has(i)?s.get(i):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isStringField)(this.fieldsIndex.get(i))?(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStringStatistics)({values:t}):(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStatistics)({values:t,minValue:null,maxValue:null,useSampleStdDev:!0}),s&&s.set(i,n);return n["var"===r?"variance":r]}_getPercentileValue(e,t){const{onStatisticField:s,statisticParameters:i,statisticType:r}=e,{value:n,orderBy:a}=i,o="desc"===a,u=this.fieldsIndex.get(s),l=[...t].filter((e=>null!=e)).sort(((e,t)=>A(e,t,u,o)));return this._calculatePercentile(l,n,"percentile_disc"===r)}_getAttributeValues(e,t,s){if(s.has(t))return s.get(t);const i=this.fieldsIndex.get(t),r=this.items.map((s=>e.getFieldValue(s,t,i)));return s.set(t,r),r}_getAttributeNormalizedValues(e,t){return this.items.map((s=>e.getNormalizedValue(s,{field:t.field,fieldInfo:this.fieldsIndex.get(t.field),normalizationField:t.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(t.normalizationField),normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})))}async _getAttributeExpressionValues(e,t,s){const{arcadeUtils:i}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_11__.loadArcade)(),r=i.createFunction(t),n=s&&i.getViewInfo(s);return this.items.map((t=>e.getExpressionValue(t,{compiledFunc:r,viewInfo:n},i)))}_calculateUniqueValues(e,t){const s={},i=this.items,r=i.length;for(let n=0;n<r;n++){const r=i[n],a=[];for(const t of e)a.push(t[n]);const o=a.join(",");t?null==s[o]&&(s[o]={count:1,data:a,items:[r],itemPositions:[n]}):null==s[o]?s[o]={count:1,data:a,items:[r],itemPositions:[n]}:(s[o].count++,s[o].items.push(r),s[o].itemPositions.push(n))}return s}_calculatePercentile(e,t,s){if(0===e.length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];const i=(e.length-1)*t,r=Math.floor(i),n=r+1,a=i%1,o=e[r],u=e[n];return n>=e.length||s||"string"==typeof o||"string"==typeof u?o:o*(1-a)+u*a}}function V(e,t,s,i,r,n){const a=r-s,o=n-i,u=a*a+o*o,l=(e-s)*a+(t-i)*o,c=Math.min(1,Math.max(0,l/u));return{x:s+a*c,y:i+o*c}}function _(e,t){return e?t?4:3:t?3:2}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (S);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getAliasFromFieldName": () => (/* binding */ u),
/* harmony export */   "getExpressionFromFieldName": () => (/* binding */ d),
/* harmony export */   "getWhereClause": () => (/* binding */ l),
/* harmony export */   "hasInvalidFieldType": () => (/* binding */ f),
/* harmony export */   "validateFields": () => (/* binding */ c),
/* harmony export */   "validateHaving": () => (/* binding */ a),
/* harmony export */   "validateWhere": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/sql/WhereClauseCache.js */ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
const s=new _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_1__.WhereClauseCache(50,500),n="feature-store:unsupported-query",t=" as ",r=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function o(i,t){if(!t)return!0;const r=s.get(t,i);if(!r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"invalid SQL expression",{where:t});if(!r.isStandardized)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"where clause is not standard",{where:t});return c(i,r.fieldNames,"where clause contains missing fields"),!0}function a(i,t,r){if(!t)return!0;const o=s.get(t,i);if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"invalid SQL expression",{having:t});if(!o.isAggregate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"having does not contain a valid aggregate function",{having:t});const a=o.fieldNames;c(i,a,"having contains missing fields");if(!o.getExpressions().every((e=>{const{aggregateType:s,field:n}=e,t=i.has(n)&&i.get(n).name;return r.some((e=>{const{onStatisticField:n,statisticType:r}=e;return(i.has(n)&&i.get(n).name)===t&&r.toLowerCase().trim()===s}))})))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"expressions in having should also exist in outStatistics",{having:t});return!0}function l(e,i){return e?s.get(e,i):null}function c(i,s,t,r=!0){const o=[];for(const u of s)if("*"!==u&&!i.has(u))if(r){const s=d(u);try{const t=l(s,i);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"invalid SQL expression",{where:s});if(!t.isStandardized)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,"expression is not standard",{clause:t});c(i,t.fieldNames,"expression contains missing fields")}catch(a){const e=a&&a.details;if(e&&(e.clause||e.where))throw a;e&&e.missingFields?o.push(...e.missingFields):o.push(u)}}else o.push(u);if(o.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,t,{missingFields:o})}function d(e){return e.split(t)[0]}function u(e){return e.split(t)[1]}function f(e,i){const s=i.get(e);return!!s&&!r.has(s.type)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/PromiseQueue.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/PromiseQueue.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
class r{constructor(){this._tasks=new Array}get length(){return this._tasks.length}push(s,t,e){return new Promise(((r,l)=>this._tasks.push(new a(r,l,s,t,e))))}unshift(s,t,e){return new Promise(((r,l)=>this._tasks.unshift(new a(r,l,s,t,e))))}process(){if(0===this._tasks.length)return!1;const r=this._tasks.shift();try{const a=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.isAborted)(r.signal);if(a&&!r.abortCallback)r.reject((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createAbortError)());else{const s=a?r.abortCallback((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createAbortError)()):r.callback();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.isPromise)(s)?s.then(r.resolve,r.reject):r.resolve(s)}}catch(a){r.reject(a)}return!0}cancelAll(){const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createAbortError)();for(const t of this._tasks)if(t.abortCallback){const e=t.abortCallback(s);t.resolve(e)}else t.reject(s);this._tasks.length=0}}class a{constructor(s,t,e,r,a){this.resolve=s,this.reject=t,this.callback=e,this.signal=r,this.abortCallback=a}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (r);


/***/ }),

/***/ "./node_modules/@arcgis/core/smartMapping/statistics/support/utils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/smartMapping/statistics/support/utils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "calculateStatistics": () => (/* binding */ r),
/* harmony export */   "calculateStringStatistics": () => (/* binding */ i),
/* harmony export */   "createError": () => (/* binding */ c),
/* harmony export */   "getNormalizedValue": () => (/* binding */ s),
/* harmony export */   "getRangeExpr": () => (/* binding */ f),
/* harmony export */   "getSQLFilterForNormalization": () => (/* binding */ a),
/* harmony export */   "isNullCountSupported": () => (/* binding */ o),
/* harmony export */   "mergeWhereClauses": () => (/* binding */ p),
/* harmony export */   "processStatsResult": () => (/* binding */ u),
/* harmony export */   "verifyBasicFieldValidity": () => (/* binding */ h),
/* harmony export */   "verifyFieldType": () => (/* binding */ d),
/* harmony export */   "verifyNumericField": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
function o(e){const n=null!=e.normalizationField||null!=e.normalizationType,t=null!=e.minValue||null!=e.maxValue,l=!!e.sqlExpression&&e.supportsSQLExpression;return!n&&!t&&!l}function i(e){const{values:n,supportsNullCount:t}=e,l=n.filter((e=>null!=e)).length,o={count:l};return t&&(o.nullcount=n.length-l),o}function r(e){const{values:n,useSampleStdDev:t,supportsNullCount:l}=e;let o=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=null,u=null,s=null,a=null,c=0;const f=null==e.minValue?-1/0:e.minValue,d=null==e.maxValue?1/0:e.maxValue;for(const p of n)Number.isFinite(p)?p>=f&&p<=d&&(r+=p,o=Math.min(o,p),i=Math.max(i,p),c++):"string"==typeof p&&c++;if(c&&null!=r){u=r/c;let e=0;for(const t of n)Number.isFinite(t)&&t>=f&&t<=d&&(e+=(t-u)**2);a=t?c>1?e/(c-1):0:c>0?e/c:0,s=Math.sqrt(a)}else o=null,i=null;const m={avg:u,count:c,max:i,min:o,stddev:s,sum:r,variance:a};return l&&(m.nullcount=n.length-c),m}function u(e,n){return n?(["avg","stddev","variance"].forEach((n=>{null!=e[n]&&(e[n]=Math.ceil(e[n]))})),e):e}function s(e,n,t,l){let o=null;switch(n){case"log":0!==e&&(o=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(l)&&0!==l&&(o=e/l*100);break;case"field":Number.isFinite(t)&&0!==t&&(o=e/t);break;case"natural-log":e>0&&(o=Math.log(e));break;case"square-root":e>0&&(o=e**.5)}return o}function a(e){const n=e.field,t=e.normalizationType,l=e.normalizationField;let o;return"log"===t?o="(NOT "+n+" = 0)":"field"===t?o="(NOT "+l+" = 0)":"natural-log"!==t&&"square-root"!==t||(o=`(${n} > 0)`),o}function c(n,t){return new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.default(n,t)}function f(e,n,t){const l=null!=n?e+" >= "+n:"",o=null!=t?e+" <= "+t:"";let i="";return i=l&&o?p(l,o):l||o,i?"("+i+")":""}function d(e,n,t,l){let o=null;return n?n.name!==e.objectIdField&&-1!==l.indexOf(n.type)||(o=c(t,"'field' should be one of these types: "+l.join(","))):o=c(t,"'field' is not defined in the layer schema"),o}function m(e,n,o){let i;return n?n.name!==e.objectIdField&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isNumericField)(n)||(i=c(o,"'field' should be one of these numeric types: "+_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.numericTypes.join(","))):i=c(o,"'field' is not defined in the layer schema"),i}function p(e,t){let l=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.isSome)(e)?e:"";return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.isSome)(t)&&t&&(l=l?"("+l+") AND ("+t+")":t),l}function h(e,n,t){const l=g({layer:e,fields:n});if(l.length)return c(t,"Unknown fields: "+l.join(", ")+". You can only use fields defined in the layer schema");const o=b({layer:e,fields:n});return o.length?c(t,"Unsupported fields: "+o.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}function g(e){const n=e.layer;return e.fields.filter((e=>!n.getField(e)))}function b(e){const n=e.layer;return e.fields.filter((e=>{const t=n.getFieldUsageInfo(e);return!t||!t.supportsStatistics}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/smartMapping/support/utils.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/smartMapping/support/utils.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "castIntegerFieldToFloat": () => (/* binding */ $),
/* harmony export */   "defaultBasemapGroups": () => (/* binding */ n),
/* harmony export */   "getBasemapGroup": () => (/* binding */ p),
/* harmony export */   "getBasemapId": () => (/* binding */ m),
/* harmony export */   "getDateDiffSQL": () => (/* binding */ g),
/* harmony export */   "getDateType": () => (/* binding */ d),
/* harmony export */   "getFieldsList": () => (/* binding */ l),
/* harmony export */   "getNormalizationType": () => (/* binding */ u),
/* harmony export */   "isIntegerField": () => (/* binding */ y),
/* harmony export */   "unitValueInDays": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.21/esri/copyright.txt for details.
*/
const n={light:["streets","gray","topo","terrain","national-geographic","oceans","osm","gray-vector","streets-vector","topo-vector","streets-relief-vector","streets-navigation-vector"],dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},r="percent-of-total",o="field",i={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},s=["integer","small-integer"];let a=null;async function l(t){const n=t.field,r=t.normalizationField,o=t.valueExpression;let i=[];if(o){if(!a){const{arcadeUtils:t}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_0__.loadArcade)();a=t}i=a.extractFieldNames(o)}return n&&i.push(n),r&&i.push(r),i}function u(e){let t=e.normalizationType;return t||(e.normalizationField?t=o:null!=e.normalizationTotal&&(t=r)),t}function c(e){return String(e).padStart(2,"0")}function f(e,t,n){let r;if("date"===t||"number"===t){"number"===t&&(e=new Date(e));r=`TIMESTAMP'${n?e.getFullYear():e.getUTCFullYear()}-${c((n?e.getMonth():e.getUTCMonth())+1)}-${c(n?e.getDate():e.getUTCDate())} ${c(n?e.getHours():e.getUTCHours())}:${c(n?e.getMinutes():e.getUTCMinutes())}:${c(n?e.getSeconds():e.getUTCSeconds())}'`}else r=e;return r}function g(e,t,n,r){const{hasQueryEngine:o}=e;let s=`(${f(n,d(e,n),o)} - ${f(t,d(e,t),o)})`;o&&(s=`(${s} * ${i.milliseconds})`);let a=i[r],l="/";a<1&&(a=1/a,l="*");return{sqlExpression:1===a?s:`(${s} ${l} ${a})`,sqlWhere:null}}function d(e,t){if(t instanceof Date)return"date";if("number"==typeof t)return"number";if("string"==typeof t){const n=e.getField(t);if("<now>"===t.toLowerCase())return;if(n&&"date"===n.type)return"field"}}function p(e,t=n){for(const n in t)if(t[n].indexOf(e)>-1)return n}function m(e,n,r=!0){let o=null;return e&&("string"==typeof e?n.includes(e)&&(o=e):o=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_1__.getWellKnownBasemapId)(e)),r?o||"gray":o}function y(e,t){const n=t&&e.getField(t);return n&&s.indexOf(n.type)>-1}function $(e){return`cast(${e} as float)`}


/***/ })

}]);